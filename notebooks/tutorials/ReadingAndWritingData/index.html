


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="https://padreati.github.io/rapaio/notebooks/tutorials/ReadingAndWritingData/">
      
      
        <meta name="author" content="Aurelian Tutuianu">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.12">
    
    
<title>Rapaio documentation site</title>

    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4dd2dd8d.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reading-and-writing-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://padreati.github.io/rapaio/" title="Rapaio" class="md-header-nav__button md-logo" aria-label="Rapaio">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Rapaio
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Reading and writing data
            
          </span>
        </div>
      
    </div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://padreati.github.io/rapaio/" title="Rapaio" class="md-nav__button md-logo" aria-label="Rapaio">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Rapaio
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Welcome to Rapaio" class="md-nav__link">
      Welcome to Rapaio
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../complete-library-features/" title="Complete list of features" class="md-nav__link">
      Complete list of features
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Tutorials
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../BriefPreview/" title="Brief preview" class="md-nav__link">
      Brief preview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../BuiltinDataSets/" title="Built-in Data sets" class="md-nav__link">
      Built-in Data sets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../DataHandlingOverview/" title="Data Handling Overview" class="md-nav__link">
      Data Handling Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Variables/" title="Variables" class="md-nav__link">
      Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CoreStatisticalTools/" title="Core statistical tools" class="md-nav__link">
      Core statistical tools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../about/" title="Short story" class="md-nav__link">
      Short story
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/padreati/rapaio" title="Source" class="md-nav__link">
      Source
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#csv-reading-and-writing" class="md-nav__link">
    CSV - reading and writing
  </a>
  
    <nav class="md-nav" aria-label="CSV - reading and writing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-readwrite-data-frames-frominto-csv-files" class="md-nav__link">
    Simple read/write data frames from/into Csv files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#various-read-and-write-methods-for-csv" class="md-nav__link">
    Various read and write methods for Csv
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <div class="highlight"><pre><span></span><code><span class="o">%</span><span class="n">load</span> <span class="p">..</span><span class="o">/</span><span class="n">rapaio</span><span class="o">-</span><span class="n">bootstrap</span>
</code></pre></div>

<h1 id="reading-and-writing-data">Reading and writing data</h1>
<h2 id="csv-reading-and-writing">CSV - reading and writing</h2>
<p>Reading and writing CSV files is an important feature for any system which works with data. The reason for its importance is the simplicity of the file format and its popularity.</p>
<p>Rapaio library offers support for both reading and writing operations. It has a lot of features and allows flexibility. However we read a file only into a data frame, and we write a csv file only from a data frame. This might look like a constraint in the beginning, but it comes natural since both are tabular data. The only difference is the fact that one operates in the memory of a program and the other one is persisted on disk.</p>
<h4 id="simple-readwrite-data-frames-frominto-csv-files">Simple read/write data frames from/into Csv files</h4>
<p>We can read a file with the default options simply by instantiating a <code>rapaio.io.Csv</code> object and calls one of <code>read</code> methods.</p>
<div class="highlight"><pre><span></span><code><span class="n">Frame</span> <span class="n">iris</span> <span class="o">=</span> <span class="n">Csv</span><span class="p">.</span><span class="na">instance</span><span class="p">().</span><span class="na">read</span><span class="p">(</span><span class="n">Datasets</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="s">&quot;iris-r.csv&quot;</span><span class="p">);</span>
</code></pre></div>

<p>We select few rows and inspect what it is inside:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// use only few rows</span>
<span class="n">iris</span> <span class="o">=</span> <span class="n">iris</span><span class="p">.</span><span class="na">mapRows</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">);</span>
<span class="n">iris</span><span class="p">.</span><span class="na">printContent</span><span class="p">();</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>    sepal-length sepal-width petal-length petal-width   class    
[0]     5.1          3.5         1.4          0.2         setosa 
[1]     4.9          3           1.4          0.2         setosa 
[2]     7            3.2         4.7          1.4     versicolor 
[3]     6.4          3.2         4.5          1.5     versicolor 
[4]     6.3          3.3         6            2.5      virginica 
[5]     5.8          2.7         5.1          1.9      virginica
</code></pre></div>

<p>Persisting a data frame into csv file format is also simple. We instantiate a <code>rapaio.io.Csv</code> object and call one of implementation of <code>write</code> methods:</p>
<div class="highlight"><pre><span></span><code><span class="n">Csv</span><span class="p">.</span><span class="na">instance</span><span class="p">().</span><span class="na">write</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="s">&quot;/tmp/iris.csv&quot;</span><span class="p">);</span>
</code></pre></div>

<p>If we open the <code>/tmp/iris.csv</code> file with an editor, we can discover that it will have the following content:
<div class="highlight"><pre><span></span><code>sepal-length,sepal-width,petal-length,petal-width,class
5.1,3.5,1.4,0.2,setosa
4.9,3,1.4,0.2,setosa
7,3.2,4.7,1.4,versicolor
6.4,3.2,4.5,1.5,versicolor
6.3,3.3,6,2.5,virginica
5.8,2.7,5.1,1.9,virginica
</code></pre></div></p>
<h4 id="various-read-and-write-methods-for-csv">Various read and write methods for Csv</h4>
<p>Java has a nice abstraction over data named input and output streams.
This is enough to make any tool to read or write data from anywhere.
We followed that line of thinking by having</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="n">Frame</span> <span class="nf">read</span><span class="p">(</span><span class="n">InputStream</span> <span class="n">inputStream</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">IOException</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="p">(</span><span class="n">Frame</span> <span class="n">df</span><span class="p">,</span> <span class="n">OutputStream</span> <span class="n">os</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">IOException</span>
</code></pre></div>

<p>Implemented on Csv class. With these two methods we basically can read from anywhere and can write to anywhere.</p>
<p>To simplify some common tasks there are some specialized forms of read and write:</p>
<ul>
<li>Read from a file giving a <code>File</code> instance</li>
<li>Read from a file giving a <code>String</code> for path name</li>
<li>Read from a gz archive <code>File</code> instance</li>
<li>
<p>Read from a resource giving <code>Class</code> and <code>String</code> for class and name of the resource (this is useful when loading data from a loaded jar or for test)</p>
</li>
<li>
<p>Write ... </p>
</li>
</ul>
<p><strong>TODO</strong></p>
<div class="highlight"><pre><span></span><code>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mf">1.0</span><span class="o">*</span><span class="mi">5</span><span class="o">/</span><span class="p">(</span><span class="mi">5</span><span class="o">+</span><span class="mi">0</span><span class="o">+</span><span class="mi">21</span><span class="o">+</span><span class="mi">23</span><span class="o">+</span><span class="mi">8</span><span class="o">+</span><span class="mi">9</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>0.07575757575757576
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mf">1.0</span><span class="o">*</span><span class="mi">10</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">+</span><span class="mi">0</span><span class="o">+</span><span class="mi">21</span><span class="o">+</span><span class="mi">23</span><span class="o">+</span><span class="mi">8</span><span class="o">+</span><span class="mi">9</span><span class="o">+</span><span class="mi">2</span><span class="o">+</span><span class="mi">9</span><span class="o">+</span><span class="mi">0</span><span class="o">+</span><span class="mi">7</span><span class="o">+</span><span class="mi">8</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>0.10309278350515463
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mf">1.0</span><span class="o">*</span><span class="mi">15</span><span class="o">/</span><span class="p">(</span><span class="mi">15</span><span class="o">+</span><span class="mi">0</span><span class="o">+</span><span class="mi">21</span><span class="o">+</span><span class="mi">23</span><span class="o">+</span><span class="mi">8</span><span class="o">+</span><span class="mi">9</span><span class="o">+</span><span class="mi">2</span><span class="o">+</span><span class="mi">9</span><span class="o">+</span><span class="mi">0</span><span class="o">+</span><span class="mi">7</span><span class="o">+</span><span class="mi">8</span><span class="o">+</span><span class="mi">20</span><span class="o">+</span><span class="mi">9</span><span class="o">+</span><span class="mi">7</span><span class="o">+</span><span class="mi">4</span><span class="o">+</span><span class="mi">17</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>0.09433962264150944
</code></pre></div>

<div class="highlight"><pre><span></span><code>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.3636a4ec.min.js"></script>
      <script src="../../../assets/javascripts/bundle.e9fe3281.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"></script>
      
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
      
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
      
    
  </body>
</html>